{% extends "layout.html" %}

{% block content %}
<h1 class="mt-4">Goals</h1>

<!-- Form to Create a New Goal -->
<div class="card mb-4">
  <div class="card-header">Create a New Goal</div>
  <div class="card-body">
    <form method="post" action="{{ url_for('goal.create_goal') }}">
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" class="form-control" id="title" name="title" required>
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <textarea class="form-control" id="description" name="description" rows="3" required></textarea>
      </div>
      <div class="form-group">
        <label for="type">Type</label>
        <select class="form-control" id="type" name="type" required>
          {% for type in GoalType %}
          <option value="{{ type.value }}">{{ type.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group">
        <label for="start_date">Start Date</label>
        <input type="date" class="form-control" id="start_date" name="start_date" required>
      </div>
      <div class="form-group">
        <label for="end_date">End Date</label>
        <input type="date" class="form-control" id="end_date" name="end_date" required>
      </div>
      <button type="submit" class="btn btn-primary">Create Goal</button>
    </form>
  </div>
</div>

<!-- List of Goals -->
<div class="card mb-4">
  <div class="card-header">Your Goals</div>
  <div class="card-body">
    <ul class="list-group">
      {% for goal in goals %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <h5>{{ goal.title }}</h5>
          <p>{{ goal.description }}</p>
          <span class="badge badge-info">{{ goal.type.name }}</span>
          <span class="badge badge-secondary">{{ goal.status }}</span>
          <small>Start Date: {{ goal.start_date }}</small><br>
          <small>End Date: {{ goal.end_date }}</small>
        </div>
        <div>
          <a href="{{ url_for('goal.edit_goal', goal_id=goal.id) }}" class="btn btn-warning btn-sm">Edit</a>
          <form method="post" action="{{ url_for('goal.delete_goal', goal_id=goal.id) }}" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>

{% endblock %}
